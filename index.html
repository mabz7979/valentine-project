<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Be My Valentine?</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        margin: 0;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background-color: #ffe6e6; /* Light pink background */
        font-family: "Dancing Script", cursive;
        overflow: hidden; /* Prevents scrollbars when button moves */
      }

      h1 {
        color: #d6336c;
        font-size: 3rem;
        margin-bottom: 20px;
        text-align: center;
        text-shadow:
          1px 1px 0 #fff,
          -1px -1px 0 #fff,
          1px -1px 0 #fff,
          -1px 1px 0 #fff,
          1px 1px 0 #fff;
      }

      .gif-container {
        margin-bottom: 20px;
        width: 230px;
        height: 230px;
        border-radius: 15px;
        overflow: hidden;
      }

      .gif-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        mix-blend-mode: multiply;
        transform: scale(1.15);
      }

      .btn-container {
        display: flex;
        gap: 20px;
      }

      button {
        padding: 15px 30px;
        font-size: 1.2rem;
        font-family: "Dancing Script", cursive;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        transition: transform 0.2s;
        font-weight: bold;
      }

      #yesBtn {
        background-color: #28a745; /* Green */
        color: white;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      #yesBtn:hover {
        transform: scale(1.1);
        background-color: #218838;
      }

      #noBtn {
        background-color: #dc3545; /* Red */
        color: white;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        position: relative; /* Allows us to change to absolute later */
        transition:
          left 0.4s ease,
          top 0.4s ease;
        z-index: 100;
      }

      #main-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        position: relative;
        z-index: 10;
      }

      #demands {
        display: none;
        flex-direction: column;
        align-items: center;
        text-align: center;
        position: relative;
        z-index: 10;
        max-width: 90%;
      }

      #demands h1 {
        font-size: 3.5rem;
        margin: 20px 0;
      }

      #arrowBtn {
        font-size: 2rem;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        padding: 0;
        margin-top: 20px;
        background-color: #ff4d4d;
        color: white;
        border: 2px solid white;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        display: flex;
        justify-content: center;
        align-items: center;
        transition:
          transform 0.3s,
          background-color 0.3s;
      }

      #arrowBtn:hover {
        transform: scale(1.1);
        background-color: #ff3333;
      }

      .heart {
        position: absolute;
        color: #ff4d4d;
        user-select: none;
        z-index: 1;
      }

      #demands ul {
        list-style: none;
        padding: 0;
        font-size: 1.5rem;
        text-align: left;
      }

      #demands li {
        margin: 10px 0;
      }

      #final-message {
        display: none;
        flex-direction: column;
        align-items: center;
        text-align: center;
        position: relative;
        z-index: 10;
      }

      #final-message h1 {
        font-size: 4rem;
        margin: 0;
      }

      #fireworks {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 100;
        pointer-events: none;
      }

      #love-meter-container {
        margin-bottom: 20px;
        width: 300px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      #love-meter-label {
        color: #d6336c;
        font-size: 1.5rem;
        margin-bottom: 5px;
      }

      #love-meter-bar {
        width: 100%;
        height: 20px;
        background-color: rgba(255, 255, 255, 0.5);
        border: 2px solid #d6336c;
        border-radius: 15px;
        overflow: hidden;
      }

      #love-meter-fill {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, #ff9a9e 0%, #ff4d4d 100%);
        transition: width 0.1s linear;
      }

      @keyframes shake {
        0% {
          transform: scale(1.1) rotate(0deg);
        }
        25% {
          transform: scale(1.1) rotate(-5deg);
        }
        50% {
          transform: scale(1.1) rotate(5deg);
        }
        75% {
          transform: scale(1.1) rotate(-5deg);
        }
        100% {
          transform: scale(1.1) rotate(0deg);
        }
      }

      .shake {
        animation: shake 0.5s ease-in-out infinite;
      }
    </style>
  </head>
  <body>
    <!-- Main Content -->
    <div id="main-content">
      <!-- Cute placeholder image -->
      <div class="gif-container">
        <img
          src="Gemini_Generated_Image_8qlzqe8qlzqe8qlz.png"
          alt="Cute Penguin and Bear"
        />
      </div>

      <h1>Will you be my Valentine?</h1>

      <div id="love-meter-container">
        <div id="love-meter-label">
          Rishta Meter <span id="label-heart">❤️</span>
        </div>
        <div id="love-meter-bar"><div id="love-meter-fill"></div></div>
      </div>

      <div class="btn-container">
        <button id="yesBtn">Yes</button>
        <button id="noBtn">No</button>
      </div>
    </div>

    <!-- Hidden Demands Page -->
    <div id="demands">
      <div
        style="
          width: 230px;
          height: 230px;
          border-radius: 15px;
          overflow: hidden;
          margin-bottom: 10px;
        "
      >
        <img
          src="Gemini_Generated_Image_8qlzqe8qlzqe8qlz.png"
          alt="Cute Animal with Hearts"
          style="
            width: 100%;
            height: 100%;
            object-fit: cover;
            mix-blend-mode: multiply;
            transform: scale(1.15);
          "
        />
      </div>
      <h1>All i need from you is</h1>
      <button id="arrowBtn">➜</button>
    </div>

    <!-- Final Message Page -->
    <div id="final-message">
      <h1>جہیز میں فارچیونر</h1>
    </div>

    <canvas id="fireworks"></canvas>

    <!-- Background Music -->
    <audio id="bg-music" loop>
      <source
        src="Elvis_Presly_-_I_Can_t_Help_Falling_In_Love_With_You_(mp3.pm).mp3"
        type="audio/mpeg"
      />
    </audio>

    <script>
      const noBtn = document.getElementById("noBtn");
      const yesBtn = document.getElementById("yesBtn");
      const mainContent = document.getElementById("main-content");
      const demands = document.getElementById("demands");
      const arrowBtn = document.getElementById("arrowBtn");
      const finalMessage = document.getElementById("final-message");
      const canvas = document.getElementById("fireworks");
      const ctx = canvas.getContext("2d");
      const loveMeterFill = document.getElementById("love-meter-fill");

      // Function to move the button
      function moveButton() {
        // Get the window dimensions
        const windowWidth = window.innerWidth;
        const windowHeight = window.innerHeight;

        // Get button dimensions
        const btnWidth = noBtn.offsetWidth;
        const btnHeight = noBtn.offsetHeight;

        // Calculate random positions ensuring the button stays within the screen
        // We subtract the button size so it doesn't clip off the edge
        const randomX = Math.random() * (windowWidth - btnWidth);
        const randomY = Math.random() * (windowHeight - btnHeight);

        // Apply the new position
        // Make sure button is direct child of body so coordinates match window
        if (noBtn.parentNode !== document.body) {
          document.body.appendChild(noBtn);
        }
        noBtn.style.position = "absolute";
        noBtn.style.left = `${randomX}px`;
        noBtn.style.top = `${randomY}px`;
      }

      // Event Listeners for Desktop (Mouse)
      noBtn.addEventListener("mouseover", moveButton);

      // Event Listeners for Mobile (Touch)
      // We use touchstart so it jumps before they can lift their finger to click
      noBtn.addEventListener("touchstart", (e) => {
        e.preventDefault(); // Prevent the actual click
        moveButton();
      });

      // Love Meter Logic
      let loveInterval;
      let loveValue = 0;

      yesBtn.addEventListener("mouseenter", () => {
        clearInterval(loveInterval);
        loveInterval = setInterval(() => {
          if (loveValue < 100) {
            loveValue++;
            loveMeterFill.style.width = loveValue + "%";
            if (loveValue === 100) {
              createHeartExplosion();
              yesBtn.classList.add("shake");
            }
          }
        }, 10);
      });

      yesBtn.addEventListener("mouseleave", () => {
        yesBtn.classList.remove("shake");
        clearInterval(loveInterval);
        loveInterval = setInterval(() => {
          if (loveValue > 0) {
            loveValue--;
            loveMeterFill.style.width = loveValue + "%";
          } else {
            clearInterval(loveInterval);
          }
        }, 10);
      });

      // Logic for the YES button
      yesBtn.addEventListener("click", () => {
        mainContent.style.display = "none";
        demands.style.display = "flex";
        noBtn.style.display = "none";

        // Optional: Add confetti effect here if desired
        document.body.style.backgroundColor = "#ffcccc";

        const audio = document.getElementById("bg-music");
        audio.play();
        startFireworks();
      });

      arrowBtn.addEventListener("click", () => {
        demands.style.display = "none";
        finalMessage.style.display = "flex";
      });

      // Create scattered hearts background
      function createHearts() {
        for (let i = 0; i < 50; i++) {
          const heart = document.createElement("div");
          heart.classList.add("heart");
          heart.innerHTML = "❤";
          heart.style.left = Math.random() * 100 + "vw";
          heart.style.top = Math.random() * 100 + "vh";
          heart.style.fontSize = Math.random() * 40 + 20 + "px";
          heart.style.transform = `rotate(${Math.random() * 360}deg)`;
          heart.style.opacity = Math.random() * 0.5 + 0.1;
          document.body.appendChild(heart);
        }
      }
      createHearts();

      // Fireworks Logic
      function startFireworks() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let fireworks = [];
        let particles = [];

        function loop() {
          requestAnimationFrame(loop);
          ctx.globalCompositeOperation = "destination-out";
          ctx.fillStyle = "rgba(0, 0, 0, 0.5)";
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          ctx.globalCompositeOperation = "lighter";

          if (Math.random() < 0.1) fireworks.push(new Firework());

          for (let i = fireworks.length - 1; i >= 0; i--) {
            fireworks[i].update();
            fireworks[i].draw();
            if (fireworks[i].done()) {
              for (let j = 0; j < 80; j++)
                particles.push(
                  new Particle(
                    fireworks[i].x,
                    fireworks[i].y,
                    fireworks[i].color,
                  ),
                );
              fireworks.splice(i, 1);
            }
          }

          for (let i = particles.length - 1; i >= 0; i--) {
            particles[i].update();
            particles[i].draw();
            if (particles[i].alpha <= 0) particles.splice(i, 1);
          }
        }

        class Firework {
          constructor() {
            this.x = Math.random() * canvas.width;
            this.y = canvas.height;
            this.sx = Math.random() * 6 - 3;
            this.sy = -(Math.random() * 15 + 9);
            this.color = `hsl(350, 100%, 85%)`;
          }
          update() {
            this.x += this.sx;
            this.y += this.sy;
            this.sy += 0.2;
          }
          draw() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
            ctx.fillStyle = this.color;
            ctx.fill();
          }
          done() {
            return this.sy >= 0;
          }
        }

        class Particle {
          constructor(x, y, color) {
            this.x = x;
            this.y = y;
            this.color = color;
            const a = Math.random() * Math.PI * 2;
            const s = Math.random() * 3 + 1;
            this.sx = Math.cos(a) * s;
            this.sy = Math.sin(a) * s;
            this.alpha = 1;
            this.decay = Math.random() * 0.03 + 0.01;
          }
          update() {
            this.x += this.sx;
            this.y += this.sy;
            this.sy += 0.1;
            this.alpha -= this.decay;
          }
          draw() {
            ctx.save();
            ctx.globalAlpha = this.alpha;
            ctx.beginPath();
            ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
            ctx.fillStyle = this.color;
            ctx.fill();
            ctx.restore();
          }
        }
        loop();
      }

      function createHeartExplosion() {
        const heartSpan = document.getElementById("label-heart");
        const target =
          heartSpan || document.getElementById("love-meter-container");
        const rect = target.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;

        for (let i = 0; i < 30; i++) {
          const heart = document.createElement("div");
          heart.innerHTML = "❤️";
          heart.style.position = "absolute";
          heart.style.left = centerX - 15 + "px";
          heart.style.top = centerY - 15 + "px";
          heart.style.fontSize = Math.random() * 20 + 15 + "px";
          heart.style.pointerEvents = "none";
          heart.style.transition = "transform 1s ease-out, opacity 1s ease-out";
          heart.style.zIndex = "1000";
          document.body.appendChild(heart);

          const angle = Math.random() * 2 * Math.PI;
          const velocity = Math.random() * 150 + 50;
          const tx = Math.cos(angle) * velocity;
          const ty = Math.sin(angle) * velocity;

          setTimeout(() => {
            heart.style.transform = `translate(${tx}px, ${ty}px) scale(0.5)`;
            heart.style.opacity = "0";
          }, 10);

          setTimeout(() => {
            heart.remove();
          }, 1000);
        }
      }
    </script>
  </body>
</html>
